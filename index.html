<!DOCTYPE html>
<html lang="ko">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>ìœ¨ë„ì› ê¸°ìˆ™ì‚¬ ë°°ì •</title>
    <style>
@font-face {
      font-family: 'ChosunCentennial';
      src: url('https://gcore.jsdelivr.net/gh/projectnoonnu/noonfonts_2206-02@1.0/ChosunCentennial.woff2') format('woff2');
      font-weight: normal;
      font-style: normal;
  }

/* popup */
.popup {
    position: fixed;
    top: 50%;
    left: 50%;
    transform: translate(-50%, -50%);
    background-color: white;
    padding: 30px;
    box-shadow: 0 0 10px rgba(0, 0, 0, 0.5);
    border-radius: 10px;
    text-align: center;
    z-index: 1000;
    max-width: 400px;
    width: 90%;
}
.popup h2 { color: #6a0dad; margin-bottom: 20px; }
.popup p { font-size: 16px; color: #555; margin-bottom: 20px; }
.popup button { background-color: #6a0dad; color: white; padding: 10px 20px; border: none; border-radius: 5px; cursor: pointer; font-size: 16px;}
.popup button:hover { background-color: #8a2be2; }
#overlay { position: fixed; top: 0; left: 0; width:100%; height:100%; background-color: rgba(0,0,0,0.5); z-index: 999; display:none; }

body {
    font-family: 'ChosunCentennial', sans-serif;
    background-color: #f4f4f9;
    color: #333;
    display: flex;
    justify-content: center;
    align-items: center;
    height: 100vh;
    margin: 0;
    background-image: url('https://github.com/chips0527/yuldowon/raw/main/lostislandBG.png');
    background-size: cover;
    background-position: center center;
}

.container {
    text-align: center;
    background-color: white;
    border-radius: 10px;
    padding: 30px;
    box-shadow: 0 0 15px rgba(0,0,0,0.1);
    max-width: 600px;
    width: 100%;
}
h1 { color: #6a0dad; margin-bottom: 20px; }
.input-field { margin: 10px 0; padding: 10px; border: 1px solid #ddd; border-radius: 5px; width: 80%; font-size: 16px; }
.submit-button { background-color: #6a0dad; color: white; padding: 10px 20px; border: none; border-radius: 5px; cursor:pointer; font-size:16px; margin-top:20px; }
.submit-button:hover { background-color:#8a2be2; }
form .button-container {
  display: flex;
  justify-content: center;
  margin-top: 20px;
}
.result {
  margin-top: 20px;
  font-size: 18px;
  font-weight: bold;
  text-align: center; /* ê²°ê³¼ ì¤‘ì•™ ì •ë ¬ */
}
.dorm-name { font-size: 22px; margin-top: 10px; }
.dorm-description { font-size: 16px; color: #777; white-space: pre-line; }

/* title image */
.title-image-container { position: absolute; top: 13%; left: 50%; transform: translate(-50%, -50%); text-align: center; z-index: 2; }
.title-image { width: 400px; height: auto; }

/* dorm colors */
.ì²­ì–‘ê´€ { color: #1E90FF; }
.ì ì´ˆê´€ { color: #FF4500; }
.í™©ì ‘ê´€ { color: #DAA520; }
.ë°±ì‘ê´€ { color: #A9A9A9; }
.í‘ìƒê´€ { color: #000000; }

/* button container */
.button-container { display:flex; justify-content:space-between; gap:10px; margin-top:10px; }
.link-button { background-color: #008CBA; color: white; padding: 10px 20px; border: none; border-radius: 5px; cursor: pointer; font-size: 16px; }
.link-button:hover { background-color: #005f73; }

    </style>
</head>
<body>
<div id="overlay" style="display: none;"></div>
<div class="popup" id="popup" style="display: none;">
    <h2>ìœ¨ë„ì›ì— ì˜¤ì‹  ê²ƒì„ í™˜ì˜í•©ë‹ˆë‹¤!</h2>
    <p>ë³¸ ë°°ì •ì€ ì˜ˆë””ë²„ìŠ¤ ê³µì‹ ë°°ì •ì´ ì•„ë‹Œ<br>íŒ¬ë©”ì´ë“œì„ì„ ì¸ì§€í•˜ê³  ê³„ì‹­ë‹ˆê¹Œ?</p>
    <button onclick="closePopup()">ì˜ˆ</button>
</div>

<div class="title-image-container">
    <img src="https://github.com/chips0527/yuldowon/raw/main/lostisland.png" class="title-image" alt="ìœ¨ë„ì›">
</div>

<div class="container" role="main">
  <h1>ìœ¨ë„ì› ê¸°ìˆ™ì‚¬ ë°°ì •</h1>
  <form id="dormForm">
    <input type="text" id="name" class="input-field" placeholder="ì´ë¦„ì„ ì…ë ¥í•˜ì„¸ìš”" required><br>
    <input type="text" id="city" class="input-field" placeholder="ì¶œì‹  ë„ì‹œë¥¼ ì…ë ¥í•˜ì„¸ìš”" required><br>
    <input type="date" id="birthdate" class="input-field" required><br>
    <div class="button-container">
      <button type="submit" class="submit-button">ê¸°ìˆ™ì‚¬ ë°°ì • ë°›ê¸°</button>
    </div>
  </form>
  <div id="result" class="result" aria-live="polite"></div>
</div>

<script>
// íŒì—… ì²˜ë¦¬
window.addEventListener('load', () => {
    document.getElementById('popup').style.display = 'block';
    document.getElementById('overlay').style.display = 'block';
});
function closePopup() {
    document.getElementById('popup').style.display = 'none';
    document.getElementById('overlay').style.display = 'none';
}

/* JDN -> ì¼ê°„(í•œê¸€ ê°„) ê³„ì‚° */
function jdnFromGregorian(y, m, d) {
    const a = Math.floor((14 - m) / 12);
    const y2 = y + 4800 - a;
    const m2 = m + 12 * a - 3;
    return d + Math.floor((153 * m2 + 2) / 5) + 365 * y2 + Math.floor(y2 / 4)
           - Math.floor(y2 / 100) + Math.floor(y2 / 400) - 32045;
}
const stemHangul = ['ê°‘','ì„','ë³‘','ì •','ë¬´','ê¸°','ê²½','ì‹ ','ì„','ê³„'];
function getDayStemHangul(y,m,d) {
    const jdn = jdnFromGregorian(y,m,d);
    const idx0 = ((jdn - 11) % 60 + 60) % 60; // 0 -> ç”²å­
    return stemHangul[idx0 % 10];
}

/* ì²œê°„ -> ê¸°ìˆ™ì‚¬ ë§¤í•‘ (ë„¤ ê¸°ì¡´ ë¡œì§ ìœ ì§€) */
const stemToDorm = {
    'ê°‘': { name: "ì²­ì–‘ê´€", cls: 'ì²­ì–‘ê´€' },
    'ì„': { name: "ì²­ì–‘ê´€", cls: 'ì²­ì–‘ê´€' },
    'ë³‘': { name: "ì ì´ˆê´€", cls: 'ì ì´ˆê´€' },
    'ì •': { name: "ì ì´ˆê´€", cls: 'ì ì´ˆê´€' },
    'ë¬´': { name: "í™©ì ‘ê´€", cls: 'í™©ì ‘ê´€' },
    'ê¸°': { name: "í™©ì ‘ê´€", cls: 'í™©ì ‘ê´€' },
    'ê²½': { name: "ë°±ì‘ê´€", cls: 'ë°±ì‘ê´€' },
    'ì‹ ': { name: "ë°±ì‘ê´€", cls: 'ë°±ì‘ê´€' },
    'ì„': { name: "í‘ìƒê´€", cls: 'í‘ìƒê´€' },
    'ê³„': { name: "í‘ìƒê´€", cls: 'í‘ìƒê´€' }
};

const descriptions = {
    "ì²­ì–‘ê´€": "ìƒì§• ë™ë¬¼ : í‘¸ë¥¸ ì‚°ì–‘ğŸ\nìƒì§• : ë‚˜ë¬´, í¬ìš©\nìƒì§• ìƒ‰ : í‘¸ë¥¸ìƒ‰\nê¸°ìˆ™ì‚¬ ì´ë…: ë°•ì• (ì¸ä»)\nì°½ë¦½ ì‹œê¸° : íƒœì¢…-ì„¸ì¢… ì‹œê¸°\nì°½ë¦½ì : ë™ì•„ì‹œì•„ì˜ ìœ ë‘ì‹œì¸ì´ì ë§ˆë²•ì—­ì‚¬í•™ìì¸ <ì–‘ í™”ëª…>",
    "ì ì´ˆê´€": "ìƒì§• ë™ë¬¼ : ë¶‰ì€ ë‹´ë¹„ğŸ¦Š\nìƒì§• : ë¶ˆ, ì—´ì •\nìƒì§• ìƒ‰ : ë¶‰ì€ìƒ‰\nê¸°ìˆ™ì‚¬ ì´ë…: í˜(ì˜ˆç¦®)\nì°½ë¦½ ì‹œê¸° : ì„¸ì¢…ì‹œê¸°\nì°½ë¦½ì : 4êµ° 6ì§„ ê°œì²™ê¸°ì—¬ì <ëˆ ì§€ë‹´> ì¥êµ°",
    "í™©ì ‘ê´€": "ìƒì§• ë™ë¬¼ : í™©ìƒ‰ ë‚˜ë¹„ğŸ¦‹\nìƒì§• : í™, ì¸ë‚´\nìƒì§• ìƒ‰ : í™©ìƒ‰\nê¸°ìˆ™ì‚¬ ì´ë…: ë¯¿ìŒ(ì‹ ä¿¡)\nì°½ë¦½ ì‹œê¸° : ì„¸ì¢…ì‹œê¸°\nì°½ë¦½ì : ëŒ€ê²€ë¬´ë‹¹, ì˜ê´€ì¸ <ì‚¬ë¹„ í™”>",
    "ë°±ì‘ê´€": "ìƒì§• ë™ë¬¼ : í•˜ì–€ ê¹Œì¹˜ğŸ•Š\nìƒì§• : ê¸ˆì†, ë¹„ìƒ\nìƒì§• ìƒ‰ : ë°±ìƒ‰\nê¸°ìˆ™ì‚¬ ì´ë…: ì´ìƒ(ì˜ç¾©)\nì°½ë¦½ ì‹œê¸° : ì„¸ì¢…ì‹œê¸°\nì°½ë¦½ì : ë°±ì œ ë§ˆì¥ìˆ  ì „ìŠ¹ì <ê¹€ì„ í™”>",
    "í‘ìƒê´€": "ìƒì§• ë™ë¬¼ : ê²€ì€ ìƒê´­ì´ğŸ¬\nìƒì§• : ë¬¼, ì†Œí†µ\nìƒì§• ìƒ‰ : í‘ìƒ‰\nê¸°ìˆ™ì‚¬ ì´ë…: ì§€í˜œ(ì§€æ™º)\nì°½ë¦½ ì‹œê¸° : ì„¸ì¢…ì‹œê¸°\nì°½ë¦½ì : ì²œë¬¸í•™ì ê²¸ ì˜ˆì–¸ì <ì„ í˜¸ì—°ê²¸>"
};

/* í¼ ì œì¶œ ì²˜ë¦¬: ìƒë…„ì›”ì¼ -> ì¼ê°„ -> ë§¤í•‘ -> ê²°ê³¼ í‘œì‹œ */
document.getElementById('dormForm').addEventListener('submit', function(e){
    e.preventDefault();

    const name = (document.getElementById('name').value || '').trim() || 'ì—¬í–‰ì';
    // ì…ë ¥ëœ ì¶œì‹ ì§€ëŠ” ìœ ì§€í•˜ë˜ ê²°ê³¼ì—” í‘œì‹œí•˜ì§€ ì•ŠìŒ per ìš”ì²­
    // const city = (document.getElementById('city').value || '').trim();
    const birthdate = document.getElementById('birthdate').value;

    if (!birthdate) {
        alert('ìƒë…„ì›”ì¼ì„ ì…ë ¥í•´ ì£¼ì„¸ìš”.');
        return;
    }

    const parts = birthdate.split('-').map(v => parseInt(v,10));
    const [yy, mm, dd] = parts;
    if (!yy || !mm || !dd) {
        alert('ì •í™•í•œ ìƒë…„ì›”ì¼ì„ ì…ë ¥í•´ ì£¼ì„¸ìš”.');
        return;
    }

    const stem = getDayStemHangul(yy, mm, dd); // ì¼ê°„(ê°‘ ë“±)
    const dormInfo = stemToDorm[stem] || { name: "ë¯¸ì§€ì •", cls: '' };
    const dormName = dormInfo.name;
    const dormClass = dormInfo.cls;
    const description = descriptions[dormName] || "ê¸°ìˆ™ì‚¬ ì •ë³´ ì—†ìŒ.";
    const colorMap = { "ì²­ì–‘ê´€":"#1E90FF", "ì ì´ˆê´€":"#FF4500", "í™©ì ‘ê´€":"#DAA520", "ë°±ì‘ê´€":"#A9A9A9", "í‘ìƒê´€":"#000000" };
    const color = colorMap[dormName] || "#000";

    // ê²°ê³¼ í‘œì‹œ: ê³„ì‚°ëœ ì¼ê°„ê³¼ ì¶œì‹ ì§€ í‘œì‹œëŠ” ì œê±°
    const resultEl = document.getElementById('result');
    resultEl.innerHTML = `
        <div class="dorm-name ${dormClass}" style="color:${color};">${name}ë‹˜ì˜ ê¸°ìˆ™ì‚¬ëŠ” ${dormName}ì…ë‹ˆë‹¤!</p></div>
        <div class="dorm-description">${description}</div>
    `;

    // UX: íŒì—… ë‹«ê¸°
    try { closePopup(); } catch(e){}
});
</script>

</body>
</html>
